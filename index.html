<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stephy Mystique | Shop</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .cart-popup {
      position: fixed; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: white; padding: 20px; border: 2px solid #ccc;
      z-index: 999; display: none; width: 90%; max-width: 400px;
    }
    .cart-popup button { margin: 5px 5px 0 0; }
    .cart-popup div span { display: inline-block; min-width: 120px; }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="logo">
      <img src="images/logo.png" alt="Stephy Mystique Logo" />
      <h1>Stephy Mystique</h1>
    </div>
    <nav class="nav-links">
      <a href="#">Home</a>
      <a href="#">Shop</a>
      <a href="#">Contact</a>
    </nav>
    <div class="header-search">
      <input type="text" id="searchInput" placeholder="Search products..." />
      <span class="search-icon">üîç</span>
    </div>
    <div class="cart">üõí <span class="cart-count">0</span></div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <h2>Discover Trendy Fashion &amp; Beauty Finds</h2>
    <p>Shop the latest styles, accessories &amp; glam essentials ‚Äî all in one place!</p>
  </section>

  <!-- PRODUCT GRID -->
  <section class="products">
    <div class="product"><img src="images/product1.jpg" alt=""><h3>Lip Gloss</h3><p>‚Çµ25</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product2.jpg" alt=""><h3>Lip Mask</h3><p>‚Çµ10</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product3.jpg" alt=""><h3>Vaseline Lip Therapy</h3><p>‚Çµ16</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product4.jpg" alt=""><h3>Lip Oil</h3><p>‚Çµ25</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product5.jpg" alt=""><h3>Petal Soap Paper</h3><p>‚Çµ10</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product6.jpg" alt=""><h3>Kiss Beauty Coffee Lip Scrub</h3><p>‚Çµ25</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product7.jpg" alt=""><h3>Romantic Rain Lip Gloss</h3><p>‚Çµ25</p><button>Add to Cart</button></div>
    <!-- ... Add products 8‚Äì20 similarly ... -->
  </section>

  <!-- CART POPUP -->
  <div id="cartPopup" class="cart-popup">
    <h3>Your Cart</h3>
    <div id="cartItems"></div>
    <p>Total: ‚Çµ<span id="cartTotal">0.00</span></p>
    <button id="checkoutBtn">Checkout</button>
    <button id="closeCart">Close</button>
  </div>

  <footer class="footer">
    <p>¬© 2025 Stephy Mystique | All Rights Reserved</p>
    <p>Follow us: <a href="#">Facebook</a> | <a href="#">Instagram</a> | <a href="#">Twitter</a></p>
    <img src="images/ceo.jpg" alt="CEO">
    <p>CEO: Stephanie Aniagyei</p>
    <p>Why choose us: Best curated e-commerce experience, quality products & reliable delivery.</p>
  </footer>

  <!-- PAYSTACK JS -->
  <script src="https://js.paystack.co/v1/inline.js"></script>

  <script>
    let cart = [];
    const cartCount = document.querySelector('.cart-count');
    const cartItemsContainer = document.getElementById('cartItems');
    const cartTotalElement = document.getElementById('cartTotal');
    const cartPopup = document.getElementById('cartPopup');

    // Add to Cart buttons
    document.querySelectorAll('.product button').forEach(btn => {
      btn.addEventListener('click', () => {
        const product = btn.parentElement;
        const name = product.querySelector('h3').innerText;
        const priceText = product.querySelector('p').innerText.replace(/[^0-9.]/g,'');
        const price = parseFloat(priceText);

        const existing = cart.find(item => item.name === name);
        if(existing) existing.qty += 1;
        else cart.push({ name, price, qty:1 });

        updateCartDisplay();
      });
    });

    // Open/Close cart
    document.querySelector('.cart').addEventListener('click', ()=>cartPopup.style.display='block');
    document.getElementById('closeCart').addEventListener('click', ()=>cartPopup.style.display='none');

    function updateCartDisplay(){
      cartItemsContainer.innerHTML = '';
      let total = 0;

      cart.forEach((item,index)=>{
        total += item.price*item.qty;
        const div = document.createElement('div');
        div.innerHTML = `
          <span>${item.name} - ‚Çµ${item.price.toFixed(2)}</span>
          <div>
            <button class="decrease" data-index="${index}">-</button>
            <span>${item.qty}</span>
            <button class="increase" data-index="${index}">+</button>
            <button class="remove" data-index="${index}">Remove</button>
          </div>
        `;
        cartItemsContainer.appendChild(div);
      });

      cartTotalElement.innerText = total.toFixed(2);
      cartCount.innerText = cart.reduce((acc,item)=>acc+item.qty,0);

      // Buttons
      document.querySelectorAll('.increase').forEach(btn=>{
        btn.onclick = ()=>{ cart[btn.dataset.index].qty +=1; updateCartDisplay(); }
      });
      document.querySelectorAll('.decrease').forEach(btn=>{
        btn.onclick = ()=>{
          const i = btn.dataset.index;
          if(cart[i].qty>1) cart[i].qty -=1;
          else cart.splice(i,1);
          updateCartDisplay();
        }
      });
      document.querySelectorAll('.remove').forEach(btn=>{
        btn.onclick = ()=>{ cart.splice(btn.dataset.index,1); updateCartDisplay(); }
      });
    }

    // Checkout ‚Üí Paystack
    document.getElementById('checkoutBtn').addEventListener('click', ()=>{
      if(cart.length===0){ alert("Your cart is empty!"); return; }
      const totalAmount = cart.reduce((acc,item)=>acc+item.price*item.qty,0);
      const amountInKobo = totalAmount*100;

      let handler = PaystackPop.setup({
        key: 'pk_live_640af38072f48339462a8937bed12dda2774a34d',
        email: prompt("Enter your email for payment:"),
        amount: amountInKobo,
        currency: 'GHS',
        ref: 'SM_' + Math.floor(Math.random()*1000000000+1),
        callback: function(response){
          alert('Payment successful! Reference: '+response.reference);
          cart=[];
          updateCartDisplay();
          cartPopup.style.display='none';
        },
        onClose: function(){ alert('Payment not completed.'); }
      });

      handler.openIframe();
    });
  </script>
</body>
</html>
