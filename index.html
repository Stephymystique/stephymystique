<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stephy Mystique | Shop</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* CART POPUP */
    .cart-popup {
      position: fixed; 
      top: 50%; 
      left: 50%;
      transform: translate(-50%, -50%);
      background: white; 
      padding: 20px; 
      border: 2px solid #ccc;
      z-index: 999; 
      display: none; 
      width: 90%; 
      max-width: 400px;
      border-radius: 10px;
    }
    .cart-popup button { 
      margin: 5px 5px 0 0; 
      padding: 6px 12px;
      font-size: 0.95rem;
    }
    .cart-popup div span { 
      display: inline-block; 
      min-width: 120px; 
      font-size: 0.95rem;
    }

    /* PRODUCT GRID */
    .products {
      display: grid;
      grid-template-columns: repeat(3, 1fr); /* 3 products per row on desktop */
      gap: 20px;
      padding: 20px 5%;
    }

    .product {
      text-align: center;
      border-radius: 10px;
      padding: 10px;
      transition: transform 0.3s;
      background-color: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .product:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .product img {
      width: 100%;
      max-width: 250px; /* larger images */
      height: auto;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 10px;
    }

    .product h3 {
      font-size: 1.2rem;
      margin: 10px 0 5px;
      color: #007c91;
    }

    .product p {
      font-size: 1.1rem;
      font-weight: bold;
      color: #007c91;
      margin-bottom: 8px;
    }

    .product button {
      font-size: 1rem;
      padding: 8px 12px;
      border-radius: 5px;
      border: none;
      background-color: #00acc1;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
    }

    .product button:hover {
      background-color: #007c91;
    }

    /* ORDER SUMMARY */
    #orderSummary {
      display:none; 
      margin-top:10px; 
      border-top:1px solid #ccc; 
      padding-top:10px; 
      font-size: 0.95rem;
    }

    #orderSummary pre { 
      white-space: pre-wrap; 
      word-wrap: break-word; 
    }

    /* RESPONSIVE */
    @media (max-width:1024px) {
      .products {
        grid-template-columns: repeat(2, 1fr); /* 2 products per row on tablet */
      }
    }

    @media (max-width:768px) {
      .products {
        grid-template-columns: 1fr; /* 1 product per row on mobile */
      }

      .product img {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="logo">
      <img src="images/logo.png" alt="Stephy Mystique Logo" />
      <h1>Stephy Mystique</h1>
    </div>
    <nav class="nav-links">
      <a href="#">Home</a>
      <a href="#">Shop</a>
      <a href="#">Contact</a>
    </nav>
    <div class="header-search">
      <input type="text" id="searchInput" placeholder="Search products..." />
      <span class="search-icon">üîç</span>
    </div>
    <div class="cart">üõí <span class="cart-count">0</span></div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <h2>Discover Trendy Fashion &amp; Beauty Finds</h2>
    <p>Shop the latest styles, accessories &amp; glam essentials ‚Äî all in one place!</p>
  </section>

  <!-- PRODUCT GRID -->
  <section class="products">
    <!-- 20 products -->
    <div class="product"><img src="images/product1.jpg" alt=""><h3>Lip Gloss</h3><p>‚Çµ25</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product2.jpg" alt=""><h3>Lip Mask</h3><p>‚Çµ10</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product3.jpg" alt=""><h3>Vaseline Lip Therapy</h3><p>‚Çµ16</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product4.jpg" alt=""><h3>Lip Oil</h3><p>‚Çµ25</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product5.jpg" alt=""><h3>Petal Soap Paper</h3><p>‚Çµ10</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product6.jpg" alt=""><h3>Kiss Beauty Coffee Lip Scrub</h3><p>‚Çµ25</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product7.jpg" alt=""><h3>Romantic Rain Lip Gloss</h3><p>‚Çµ25</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product8.jpg" alt=""><h3>Sheer Matte Lipstick</h3><p>‚Çµ30</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product9.jpg" alt=""><h3>Tinted Lip Balm</h3><p>‚Çµ15</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product10.jpg" alt=""><h3>Hydrating Lip Serum</h3><p>‚Çµ28</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product11.jpg" alt=""><h3>Glossy Lip Topcoat</h3><p>‚Çµ22</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product12.jpg" alt=""><h3>Exfoliating Lip Mask</h3><p>‚Çµ18</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product13.jpg" alt=""><h3>Rose Lip Butter</h3><p>‚Çµ20</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product14.jpg" alt=""><h3>Cocoa Lip Balm</h3><p>‚Çµ15</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product15.jpg" alt=""><h3>Lip Plumper</h3><p>‚Çµ35</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product16.jpg" alt=""><h3>Nourishing Lip Oil</h3><p>‚Çµ27</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product17.jpg" alt=""><h3>Cherry Lip Scrub</h3><p>‚Çµ25</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product18.jpg" alt=""><h3>Glossy Lip Stain</h3><p>‚Çµ23</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product19.jpg" alt=""><h3>Vanilla Lip Therapy</h3><p>‚Çµ19</p><button>Add to Cart</button></div>
    <div class="product"><img src="images/product20.jpg" alt=""><h3>Berry Lip Gloss</h3><p>‚Çµ26</p><button>Add to Cart</button></div>
  </section>

  <!-- CART POPUP -->
  <div id="cartPopup" class="cart-popup">
    <h3>Your Cart</h3>
    <div id="cartItems"></div>
    <p>Total: ‚Çµ<span id="cartTotal">0.00</span></p>

    <!-- DELIVERY DETAILS -->
    <div id="deliveryDetails" style="margin-top:10px;">
      <h4>Delivery Details</h4>
      <input type="text" id="customerName" placeholder="Full Name" style="width:100%; margin-bottom:5px;" />
      <input type="text" id="customerPhone" placeholder="Phone Number" style="width:100%; margin-bottom:5px;" />
      <textarea id="customerAddress" placeholder="Delivery Address" style="width:100%; margin-bottom:5px;"></textarea>
    </div>

    <button id="checkoutBtn">Checkout</button>
    <button id="closeCart">Close</button>

    <!-- ORDER SUMMARY -->
    <div id="orderSummary">
      <h4>Order Summary</h4>
      <pre id="orderSummaryText"></pre>
      <button id="confirmPaymentBtn">OK</button>
    </div>
  </div>

  <footer class="footer">
    <p>¬© 2025 Stephy Mystique | All Rights Reserved</p>
    <p>Follow us: <a href="#">Facebook</a> | <a href="#">Instagram</a> | <a href="#">Twitter</a></p>
    <img src="images/ceo.jpg" alt="CEO">
    <p>CEO: Stephanie Aniagyei</p>
    <p>Why choose us: Best curated e-commerce experience, quality products & reliable delivery.</p>
  </footer>

  <!-- PAYSTACK JS -->
  <script src="https://js.paystack.co/v1/inline.js"></script>

  <script>
    let cart = [];
    const cartCount = document.querySelector('.cart-count');
    const cartItemsContainer = document.getElementById('cartItems');
    const cartTotalElement = document.getElementById('cartTotal');
    const cartPopup = document.getElementById('cartPopup');
    const orderSummaryDiv = document.getElementById('orderSummary');
    const orderSummaryText = document.getElementById('orderSummaryText');
    const confirmPaymentBtn = document.getElementById('confirmPaymentBtn');

    // Add to Cart buttons
    document.querySelectorAll('.product button').forEach(btn => {
      btn.addEventListener('click', () => {
        const product = btn.parentElement;
        const name = product.querySelector('h3').innerText;
        const priceText = product.querySelector('p').innerText.replace(/[^0-9.]/g,'');
        const price = parseFloat(priceText);

        const existing = cart.find(item => item.name === name);
        if(existing) existing.qty += 1;
        else cart.push({ name, price, qty:1 });

        updateCartDisplay();
      });
    });

    // Open/Close cart
    document.querySelector('.cart').addEventListener('click', ()=>cartPopup.style.display='block');
    document.getElementById('closeCart').addEventListener('click', ()=>{
      cartPopup.style.display='none';
      orderSummaryDiv.style.display='none';
    });

    function updateCartDisplay(){
      cartItemsContainer.innerHTML = '';
      let total = 0;

      cart.forEach((item,index)=>{
        total += item.price*item.qty;
        const div = document.createElement('div');
        div.innerHTML = `
          <span>${item.name} - ‚Çµ${item.price.toFixed(2)}</span>
          <div>
            <button class="decrease" data-index="${index}">-</button>
            <span>${item.qty}</span>
            <button class="increase" data-index="${index}">+</button>
            <button class="remove" data-index="${index}">Remove</button>
          </div>
        `;
        cartItemsContainer.appendChild(div);
      });

      cartTotalElement.innerText = total.toFixed(2);
      cartCount.innerText = cart.reduce((acc,item)=>acc+item.qty,0);

      document.querySelectorAll('.increase').forEach(btn=>{
        btn.onclick = ()=>{ cart[btn.dataset.index].qty +=1; updateCartDisplay(); };
      });
      document.querySelectorAll('.decrease').forEach(btn=>{
        btn.onclick = ()=>{
          if(cart[btn.dataset.index].qty>1){
            cart[btn.dataset.index].qty -=1; updateCartDisplay();
          }
        };
      });
      document.querySelectorAll('.remove').forEach(btn=>{
        btn.onclick = ()=>{
          cart.splice(btn.dataset.index,1); updateCartDisplay();
        };
      });
    }

    // Checkout ‚Üí show order summary
    document.getElementById('checkoutBtn').addEventListener('click', () => {
      const name = document.getElementById('customerName').value.trim();
      const phone = document.getElementById('customerPhone').value.trim();
      const address = document.getElementById('customerAddress').value.trim();

      if (!name || !phone || !address) { alert("Please fill in all delivery details!"); return; }
      if (cart.length === 0) { alert("Your cart is empty!"); return; }

      let summary = "";
      cart.forEach(item => { summary += `${item.name} x${item.qty} = ‚Çµ${(item.price*item.qty).toFixed(2)}\n`; });
      const total = cart.reduce((acc,item)=>acc+item.price*item.qty,0);
      summary += `\nTotal: ‚Çµ${total.toFixed(2)}\n`;
      summary += `\nDelivery Details:\nName: ${name}\nPhone: ${phone}\nAddress: ${address}`;

      orderSummaryText.textContent = summary;
      orderSummaryDiv.style.display = 'block';
    });

    // Confirm payment ‚Üí trigger Paystack
    confirmPaymentBtn.addEventListener('click', () => {
      const name = document.getElementById('customerName').value.trim();
      const phone = document.getElementById('customerPhone').value.trim();
      const address = document.getElementById('customerAddress').value.trim();
      const totalAmount = cart.reduce((acc, item) => acc + item.price * item.qty, 0) * 100;

      const metadata = {
        custom_fields: [
          { display_name: "Customer Name", value: name },
          { display_name: "Phone Number", value: phone },
          { display_name: "Delivery Address", value: address },
          { display_name: "Order Items", value: cart.map(i => `${i.name} x${i.qty}`).join(", ") }
        ]
      };

      const handler = PaystackPop.setup({
        key: 'pk_live_640af38072f48339462a8937bed12dda2774a34d',
        email: 'customer@example.com',
        amount: totalAmount,
        currency: 'GHS',
        ref: 'SM-' + Math.floor(Math.random() * 1000000000 + 1),
        metadata: metadata,
        callback: function(response) {
          alert('Payment successful! Reference: ' + response.reference);
          cart = [];
          updateCartDisplay();
          cartPopup.style.display = 'none';
          orderSummaryDiv.style.display = 'none';
        },
        onClose: function() { alert('Payment window closed.'); }
      });

      handler.openIframe();
    });
  </script>
</body>
</html>
